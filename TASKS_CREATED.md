# New Granary Tasks Created - 2026-02-15

Based on the PR #3837 comparison findings, created 2 new tasks to address remaining PJF parity gaps.

## Summary

**Total Granary Tasks:** 36
- ✅ Done: 33
- ⏳ Todo: 3 (Tasks #32, #35, #36)

## New Tasks

### Task #35: Add blank line after package header and remove excess import blank line (PJF parity)
**Priority:** P0  
**Status:** todo  
**Impact:** 451/473 files (95%)

**Gap Addressed:**
- Missing blank line after file header comment, before `package` statement
- Excess blank line after import block (should be only one)

**Example:**
```diff
 /*
  * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
  */
+
 package org.openapis.review.openapi;
 
 import org.openapis.review.openapi.utils.Utils;
 
-
 /**
  * SDK Review: A test document...
  */
```

**Files to Modify:**
- `src/generation/generate.rs:116-195` — `gen_program()` function

---

### Task #36: Wrap nested builders in argument lists (PJF parity)
**Priority:** P1  
**Status:** todo  
**Impact:** 115/473 files (24%)

**Gap Addressed:**
- Arguments containing `.builder()...build()` patterns not wrapped
- Nested builder chains need double continuation indent

**Example:**
```diff
 // Current
-animal(Cat.builder().animalType(CatAnimalType.CAT).furLength("short").build())
+
+// Expected
+animal(Cat.builder()
+        .animalType(CatAnimalType.CAT)
+        .furLength("short")
+        .build())
```

**Files to Modify:**
- `src/generation/declarations.rs:1231-1283` — `gen_argument_list()`
- `src/generation/expressions.rs` — helper for builder pattern detection

---

## Existing Todo Task

### Task #32: Fix annotation argument brace spacing (PJF parity)
**Priority:** P3  
**Status:** todo (already existed)  
**Impact:** 2/473 files (<1%)

---

## Projected Impact

Completing these 3 tasks would improve PJF match rate:

| Scenario | Match Rate | Files |
|----------|------------|-------|
| Current (33/36 done) | 1% | 7/473 |
| + Task #35 (package/import blanks) | ~50% | ~236/473 |
| + Task #36 (nested builders) | ~70-80% | ~350-380/473 |
| + Task #32 (brace spacing) | ~70-80% | ~350-380/473 |

---

## Task Details

Full task descriptions available in granary:
```bash
granary task rust-wasm-dprint-plugin-for-java-jznb-task-35 --prompt
granary task rust-wasm-dprint-plugin-for-java-jznb-task-36 --prompt
```

---

## Related Reports

- **PJF_COMPARISON_REPORT_PR3837.md** - Full comparison analysis
- **GRANARY_RECONCILIATION.md** - Task-by-task reconciliation
- **comparison_examples/** - Example diffs for each gap
